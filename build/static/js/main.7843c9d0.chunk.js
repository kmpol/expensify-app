(this["webpackJsonpexpensify-app"]=this["webpackJsonpexpensify-app"]||[]).push([[0],{252:function(e,t,n){},261:function(e,t){},307:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(31),o=n.n(s),c=n(32),i=n(40),u=n(15),p=n(17),d=n(7),h=n.n(d),j=n(69),f=n.n(j),l=n(3),b=function(e){var t=e.id,n=e.description,r=e.amount,a=e.createdAt;return Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/edit/".concat(t),children:Object(l.jsx)("h3",{children:n})}),Object(l.jsxs)("p",{children:[f()(r/100).format("$0, 0.00"),"-",h()(a).format("MMMM Do, YYYY")]})]})},x=function(e,t){var n=t.text,r=t.sortBy,a=t.startDate,s=t.endDate;return e.filter((function(e){var t=h()(e.createdAt),r=!a||a.isSameOrBefore(t,"day"),o=!s||s.isSameOrAfter(t,"day"),c=e.description.toLowerCase().includes(n.toLowerCase());return r&&o&&c})).sort((function(e,t){return"date"===r?e.createdAt<t.createdAt?1:-1:"amount"===r?e.amount<t.amount?1:-1:void 0}))},O=Object(c.b)((function(e){return{expenses:x(e.expenses,e.filters)}}))((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Expense List"}),Object(l.jsx)("div",{children:0===e.expenses.length?Object(l.jsx)("h2",{children:"No expneses"}):e.expenses.map((function(e){return Object(l.jsx)(b,Object(p.a)({},e),e.id)}))})]})})),v=n(36),m=n(37),E=n(39),g=n(38),D=n(70),S=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={calendarFocused:null},e.onDatesChange=function(t){var n=t.startDate,r=t.endDate;e.props.setStartDate(n),e.props.setEndDate(r)},e.onFocusChange=function(t){e.setState((function(){return{calendarFocused:t}}))},e.onTextChange=function(t){e.props.setTextFilter(t.target.value)},e.onSortChange=function(t){"date"===t.target.value?e.props.sortByDate():e.props.sortByAmount()},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"text",value:this.props.filters.text,onChange:this.onTextChange}),Object(l.jsxs)("select",{value:this.props.filters.sortBy,onChange:this.onSortChange,children:[Object(l.jsx)("option",{value:"date",children:"Date"}),Object(l.jsx)("option",{value:"amount",children:"Amount"})]}),Object(l.jsx)(D.DateRangePicker,{startDate:this.props.filters.startDate,endDate:this.props.filters.endDate,onDatesChange:this.onDatesChange,focusedInput:this.state.calendarFocused,onFocusChange:this.onFocusChange,showClearDates:!0,numberOfMonths:1,isOutsideRange:function(){return!1},startDateId:"1",endDateId:"2"})]})}}]),n}(a.a.Component),y=Object(c.b)((function(e){return{filters:e.filters}}),(function(e){return{sortByDate:function(){return e({type:"SORT_BY_DATE"})},sortByAmount:function(){return e({type:"SORT_BY_AMOUNT"})},setTextFilter:function(t){return e(function(){return{type:"SET_TEXT_FILTER",text:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}(t))},setStartDate:function(t){return e(function(e){return{type:"SET_START_DATE",startDate:e}}(t))},setEndDate:function(t){return e(function(e){return{type:"SET_END_DATE",endDate:e}}(t))}}}))(S),C=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=1===this.props.expenseCount?"expense":"expenses";return Object(l.jsx)("div",{children:Object(l.jsxs)("p",{children:["Viewing ",this.props.expenseCount," ",e," with total: $",f()(this.props.expensesInTotal/100).format("0.00")]})})}}]),n}(a.a.Component),A=Object(c.b)((function(e){var t,n=x(e.expenses,e.filters);return{expenseCount:n.length,expensesInTotal:(t=n,t.length?t.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0):0)}}))(C),T=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(A,{}),Object(l.jsx)(y,{}),Object(l.jsx)(O,{})]})},_=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this,e)).onDescriptionChange=function(e){var t=e.target.value;r.setState((function(){return{description:t}}))},r.onNoteChange=function(e){var t=e.target.value;r.setState((function(){return{note:t}}))},r.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||r.setState((function(){return{amount:t}}))},r.onDateChange=function(e){e&&r.setState((function(){return{createdAt:e}}))},r.onFocusChange=function(e){var t=e.focused;r.setState((function(){return{calendarFocused:t}}))},r.onSubmitForm=function(e){e.preventDefault(),r.state.description&&r.state.amount?(r.setState((function(){return{error:""}})),r.props.onSubmitJD({description:r.state.description,amount:100*parseFloat(r.state.amount,10),note:r.state.note,createdAt:r.state.createdAt.valueOf()})):r.setState((function(){return{error:"Please provide required information!"}}))},r.state={description:e.expense?e.expense.description:"",note:e.expense?e.expense.note:"",amount:e.expense?(e.expense.amount/100).toString():"",createdAt:e.expense?h()(e.expense.createdAt):h()(),calendarFocused:!1,error:""},r}return Object(m.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:this.state.error}),Object(l.jsxs)("form",{onSubmit:this.onSubmitForm,children:[Object(l.jsx)("input",{type:"text",placeholder:"Description",autoFocus:!0,value:this.state.description,onChange:this.onDescriptionChange}),Object(l.jsx)("input",{type:"text",placeholder:"Amount",value:this.state.amount,onChange:this.onAmountChange}),Object(l.jsx)(D.SingleDatePicker,{date:this.state.createdAt,onDateChange:this.onDateChange,focused:this.state.calendarFocused,onFocusChange:this.onFocusChange,numberOfMonths:1,isOutsideRange:function(){return!1}}),Object(l.jsx)("textarea",{placeholder:"Add a note for your expense (optional)",value:this.state.note,onChange:this.onNoteChange}),Object(l.jsx)("button",{children:"Add Expense"})]})]})}}]),n}(a.a.Component),F=n(71);F.a.initializeApp({apiKey:"AIzaSyAoWczXSBRxh_ljjJ5FTg5W2rqXPMErsB8",authDomain:"expensify-jd-test.firebaseapp.com",databaseURL:"https://expensify-jd-test-default-rtdb.europe-west1.firebasedatabase.app",projectId:"expensify-jd-test",storageBucket:"expensify-jd-test.appspot.com",messagingSenderId:"238871812815",appId:"1:238871812815:web:3d5467684475d221feb5ba"});var R=F.a.database(),N=function(e){return{type:"ADD_EXPENSE",expense:e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{type:"REMOVE_EXPENSE",id:t}},w=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.startAddExpense(t),e.props.history.push("/")},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Add Expense"}),Object(l.jsx)(_,{onSubmitJD:this.onSubmit})]})}}]),n}(a.a.Component),I=Object(c.b)(void 0,(function(e){return{startAddExpense:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.description,r=void 0===n?"":n,a=e.note,s=void 0===a?"":a,o=e.amount,c=void 0===o?0:o,i=e.createdAt,u={description:r,note:s,amount:c,createdAt:void 0===i?0:i};return R.ref("expenses").push(u).then((function(e){t(N(Object(p.a)({id:e.key},u)))}))}}(t))}}}))(w),P=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.editExpense(e.props.expense.id,t),e.props.history.push("/")},e.onRemove=function(){e.props.startRemoveExpense({id:e.props.expense.id}),e.props.history.push("/")},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(_,{expense:this.props.expense,onSubmitJD:this.onSubmit}),Object(l.jsx)("button",{onClick:this.onRemove,children:"Remove"})]})}}]),n}(a.a.Component),X=Object(c.b)((function(e,t){return{expense:e.expenses.find((function(e){return e.id===t.match.params.id}))}}),(function(e,t){return{editExpense:function(t,n){return e(function(e,t){return{type:"EDIT_EXPENSE",id:e,updates:t}}(t,n))},startRemoveExpense:function(t){return e(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return function(t){return R.ref("expenses/".concat(e)).remove().then((function(){t(B({id:e}))}))}}(t))}}}))(P),k=function(){return Object(l.jsx)("div",{children:"Help Page"})},M=function(){return Object(l.jsxs)("div",{children:["404! - ",Object(l.jsx)(i.b,{to:"/",children:"Go home"})]})},L=function(){return Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"Expensify"}),Object(l.jsx)(i.c,{activeClassName:"is-active",to:"/",exact:!0,children:"Home page"}),Object(l.jsx)(i.c,{activeClassName:"is-active",to:"/create",children:"Create expense"}),Object(l.jsx)(i.c,{activeClassName:"is-active",to:"/help",children:"Help page"})]})},Y=function(){return Object(l.jsx)(i.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsx)(L,{}),Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/",component:T,exact:!0}),Object(l.jsx)(u.a,{path:"/create",component:I}),Object(l.jsx)(u.a,{path:"/edit/:id",component:X}),Object(l.jsx)(u.a,{path:"/help",component:k}),Object(l.jsx)(u.a,{component:M})]})]})})},J=n(63),U=n(160),V=n(161),z=[],H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return[].concat(Object(V.a)(e),[t.expense]);case"REMOVE_EXPENSE":return e.filter((function(e){return e.id!==t.id}));case"EDIT_EXPENSE":return e.map((function(e){return e.id===t.id?Object(p.a)(Object(p.a)({},e),t.updates):e}));case"SET_EXPENSES":return t.expenses;default:return e}},$={text:"",sortBy:"date",startDate:h()().startOf("month"),endDate:h()().endOf("month")},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return Object(p.a)(Object(p.a)({},e),{},{text:t.text});case"SORT_BY_AMOUNT":return Object(p.a)(Object(p.a)({},e),{},{sortBy:"amount"});case"SORT_BY_DATE":return Object(p.a)(Object(p.a)({},e),{},{sortBy:"date"});case"SET_START_DATE":return Object(p.a)(Object(p.a)({},e),{},{startDate:t.startDate});case"SET_END_DATE":return Object(p.a)(Object(p.a)({},e),{},{endDate:t.endDate});default:return e}},W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.c,G=(n(252),n(253),n(306),Object(J.d)(Object(J.b)({expenses:H,filters:q}),W(Object(J.a)(U.a)))),K=Object(l.jsx)(c.a,{store:G,children:Object(l.jsx)(Y,{})});o.a.render(Object(l.jsx)("p",{children:"Loading"}),document.getElementById("root")),G.dispatch((function(e){return R.ref("expenses").once("value").then((function(t){var n=[];t.forEach((function(e){n.push(Object(p.a)({id:e.key},e.val()))})),e(function(e){return{type:"SET_EXPENSES",expenses:e}}(n))}))})).then((function(){o.a.render(K,document.getElementById("root"))}))}},[[307,1,2]]]);
//# sourceMappingURL=main.7843c9d0.chunk.js.map